
//exec tests/script/runtime.cs

//pow = [if (= 1 $arg2) [result $arg1][* $arg1 (pow $arg1 (- $arg2 1))]]

duration = [
    local seconds $arg1
    
    local hours (div $seconds 3600)
    seconds = (- $seconds (* $hours 3600))
    
    local mins (div $seconds 60)
    seconds = (- $seconds (* $mins 60))
    
    local secs $seconds
    
    if (< $hours 10) [hours = [0@hours]]
    if (< $mins 10) [mins = [0@mins]]
    if (< $secs 10) [secs = [0@secs]]
    
    result (format "%1:%2:%3" $hours $mins $secs)
]

// user-friendly duration string
fduration = [
    local seconds $arg1
    
    local hours (div $seconds 3600)
    seconds = (- $seconds (* $hours 3600))
    
    local hourdes "hours"
    if (= $hours 1) [hourdes = "hour"]
    
    local mins (div $seconds 60)
    seconds = (- $seconds (* $mins 60))
    
    local mindes "minutes"
    if (= $mins 1) [mindes = "minute"]
    
    local secs $seconds
    
    local secdes "seconds"
    if (= $secs 1) [secdes = "second"]
    
    if $hours [
        string = (concat $hours $hourdes)
        if (> $mins 0) [string = (concat $string (concat $mins $mindes))]
    ] [
        if $mins [
            string = (concat $mins $mindes)
            if (> $secs 0) [string = (concat $string (concat $secs $secdes))]
        ] [string = (concat $secs $secdes)]
    ]
    
    result $string
]

add_intervals = [
    parameters lst num
    if (< $num 2) 0 [(+ (- (at $lst (- $num 2)) (at $lst (- $num 1))) (add_intervals $lst (- $num 1)))]
]

